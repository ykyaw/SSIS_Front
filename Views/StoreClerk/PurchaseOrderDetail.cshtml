@{
    ViewData["Title"] = "Purchase Order Form";
    List<PurchaseOrderDetail> pods = (List<PurchaseOrderDetail>)ViewData["purchaseOrderDetails"];
}
<h1>@ViewData["Title"]</h1>

<div>
    <table>
        <tr>
            <td>PO Number</td>
            <td>@pods[0].PurchaseOrderId</td>
        </tr>
        <tr>
            <td>Supplier</td>
            <td>@pods[0].PurchaseOrder.Supplier.Name</td>
        </tr>
        <tr>
            <td>Deliver to</td>
            <td>@pods[0].PurchaseOrder.CollectionPoint.Location</td>
        </tr>
        <tr>
            <td>Attn</td>
            <td>@pods[0].PurchaseOrder.OrderedByClerk.Name</td>
        </tr>
    </table>
</div>

<div>
    Please supply the following items by @SSIS_FRONT.Utils.TimeUtil.convertTimestampToyyyyMMdd(pods[0].PurchaseOrder.SupplyByDate).
</div>

<div>
    <table>
        <thead>
            <tr>
                <th>Item Code</th>
                <th>Description</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total Price</th>
            </tr>
        </thead>
        <tbody>

            @foreach (PurchaseOrderDetail pod in pods)
            {
                <tr>
                    <td>@pod.ProductId</td>
                    <td>@pod.Product.Description</td>
                    <td>@pod.QtyPurchased</td>
                    <td>@((pod.TotalPrice / pod.QtyPurchased).ToString("C"))</td>
                    <td>@pod.TotalPrice.ToString("C")</td>
                </tr>
            }
        </tbody>
    </table>
</div>

<div>
    Total @pods.Sum(x => x.TotalPrice).ToString("C")
</div>

<div>
    <table>
        <tr>
            <td>Ordered by</td>
            <td>@pods[0].PurchaseOrder.OrderedByClerk.Name</td>
            <td>@SSIS_FRONT.Utils.TimeUtil.convertTimestampToyyyyMMdd(pods[0].PurchaseOrder.OrderedDate)</td>
        </tr>
    </table>
</div>

